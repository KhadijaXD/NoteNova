const sqlite3 = require("sqlite3").verbose(); const db = new sqlite3.Database("./notes.db"); db.serialize(() => { db.run("BEGIN TRANSACTION"); db.get("SELECT MAX(id) as max_id FROM Notes", [], (err, row) => { if (err) console.error(err); const max = row?.max_id || 0; console.log(`Max note ID: ${max}`); db.run("UPDATE sqlite_sequence SET seq = ? WHERE name = ?", [max, "Notes"]); }); db.run("COMMIT", (err) => { if (err) console.error(err); db.all("SELECT * FROM sqlite_sequence", [], (err, rows) => { console.log("Updated sequences:"); console.log(rows); db.close(); }); }); });
